{
  "description": "Shrieking",
  "supported_items": [
    "minecraft:bow"
  ],
  "exclusive_set": "#enchantology:exclusive_set/incompatible_with_despawned_arrow",
  "weight": 1,
  "max_level": 1,
  "min_cost": {
    "base": 20,
    "per_level_above_first": 0
  },
  "max_cost": {
    "base": 50,
    "per_level_above_first": 0
  },
  "anvil_cost": 8,
  "slots": [
    "mainhand"
  ],
  "effects": {
    "minecraft:projectile_spawned": [
        {
            "effect": {
                "type": "minecraft:run_function",
                "function": "enchantology:shrieking/init_ray"
            },
            "requirements": {
              "condition": "minecraft:entity_properties",
              "entity": "this",
              "predicate": {
                "nbt": {
                  "crit": true
                }
              }
            }
        },
        {
          "effect": {
            "type": "minecraft:all_of",
            "effects": [
              {
                "type": "minecraft:run_function",
                "function": "enchantology:shrieking/misfire"
              },
              {
                "type": "minecraft:spawn_particles",
                "particle":{
                    "type": "minecraft:white_smoke"
                },
                "horizontal_position": {
                    "type": "in_bounding_box",
                    "scale": 2
                },
                "vertical_position": {
                    "type": "in_bounding_box",
                    "scale": 2
                },
                "horizontal_velocity": {
                    "base": 0
                },
                "vertical_velocity": {
                    "base": 0
                }
              },
              {
                "type": "minecraft:play_sound",
                "sound": "block.creaking_heart.break",
                "pitch": 2,
                "volume": 1
              }
            ]
          },
          "requirements": {
            "condition": "minecraft:entity_properties",
            "entity": "this",
            "predicate": {
              "nbt": {
                "crit": false
              }
            }
          }
        }
    ]
  }
}
